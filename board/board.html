<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase ê²Œì‹œíŒ</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
        textarea, input { width: 100%; margin-bottom: 10px; padding: 8px; }
        button { width: 100%; padding: 10px; background: blue; color: white; border: none; }
        .post { border: 1px solid #ddd; padding: 10px; margin-top: 10px; }
        .title { font-weight: bold; }
    </style>
</head>
<body>

    <h2>ê²Œì‹œê¸€ ì‘ì„±</h2>
    <input type="text" id="title" placeholder="ì œëª© ì…ë ¥">
    <textarea id="content" placeholder="ë‚´ìš© ì…ë ¥"></textarea>
    <button onclick="addPost()">ì „ì†¡</button>

    <h2>ê²Œì‹œíŒ</h2>
    <div id="board"></div>

    <script>
        // ğŸ”¥ Firebase ì„¤ì • (ì—¬ê¸° ê°’ì„ ë³¸ì¸ Firebase ì„¤ì • ê°’ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•¨!)
        const firebaseConfig = {
                        apiKey: "AIzaSyDbxsJz3CgvnB_e_kaD2WaxiJx5AyDL_QQ",
                        authDomain: "simpleboard-fb6d1.firebaseapp.com",
                        projectId: "simpleboard-fb6d1",
                        storageBucket: "simpleboard-fb6d1.firebasestorage.app",
                        messagingSenderId: "1064066037827",
                        appId: "1:1064066037827:web:0678585992520d96edfcf6",
                        measurementId: "G-WE44941W3F"
                     };

       // Firebase SDK ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
            import { getFirestore, collection, addDoc, getDocs, orderBy, query } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// Firebase ì´ˆê¸°í™”
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

// Firestoreì—ì„œ ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
            async function loadPosts() {
                 document.getElementById('board').innerHTML = ""; // ê¸°ì¡´ ë‚´ìš© ì´ˆê¸°í™”
                const q = query(collection(db, "posts"), orderBy("timestamp", "desc"));
    const snapshot = await getDocs(q);

    snapshot.forEach(doc => {
        let data = doc.data();
        displayPost(data.title, data.content);
    });
}

// Firestoreì— ê²Œì‹œê¸€ ì¶”ê°€
async function addPost() {
    let title = document.getElementById('title').value;
    let content = document.getElementById('content').value;

    if (!title || !content) {
        alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
    }

    try {
        await addDoc(collection(db, "posts"), {
            title: title,
            content: content,
            timestamp: new Date()
        });
        loadPosts(); // ìƒˆë¡œê³ ì¹¨ ì—†ì´ ë°”ë¡œ ë°˜ì˜
        document.getElementById('title').value = "";
        document.getElementById('content').value = "";
    } catch (error) {
        console.error("Error adding document: ", error);
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ê²Œì‹œê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
window.onload = loadPosts;
    </script>

</body>
</html>